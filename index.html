<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>السراب الرقمي | Digital Mirage - Phantom-011</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <!-- ========================================== -->
    <!-- START CSS (انسخ هذا الجزء لمربع CSS في CodePen) -->
    <!-- ========================================== -->
    <style>
        :root {
            --primary-color: #00ff41;
            --primary-dim: #004400;
            --bg-color: #020202;
            --card-bg: rgba(0, 20, 0, 0.85);
            --text-glow: 0 0 10px rgba(0, 255, 65, 0.5);
            --danger-color: #ff0000;
            --danger-dim: #440000;
            --abort-color: #8b0000;
            --abort-hover: #dc143c;
            --warning-color: #ffa500;
            --cyber-purple: #8000ff;
            --encrypt-color: #00ffff;
        }

        body.threat-mode {
            --primary-color: #ff0000;
            --primary-dim: #440000;
            --card-bg: rgba(20, 0, 0, 0.9);
            --text-glow: 0 0 15px rgba(255, 0, 0, 0.7);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--primary-color);
            font-family: 'Cairo', 'Share Tech Mono', monospace;
            margin: 0;
            padding: 10px;
            background-image: 
                linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, .03) 25%, rgba(255, 255, 255, .03) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .03) 75%, rgba(255, 255, 255, .03) 76%, transparent 77%, transparent),
                linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, .03) 25%, rgba(255, 255, 255, .03) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .03) 75%, rgba(255, 255, 255, .03) 76%, transparent 77%, transparent);
            background-size: 40px 40px;
            transition: color 0.5s ease;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            border: 1px solid var(--primary-dim);
            padding: 20px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.7);
            transition: border-color 0.5s ease, box-shadow 0.5s ease;
            background: rgba(0,0,0,0.3);
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
            transition: border-color 0.5s ease;
        }

        .logo-area h1 { font-size: 1.6rem; margin: 0; text-shadow: var(--text-glow); }
        .badge {
            background: var(--primary-color);
            color: #000;
            padding: 3px 10px;
            font-size: 11px;
            font-weight: bold;
            margin-right: 10px;
            border-radius: 2px;
        }

        .system-status {
            border: 1px solid var(--primary-color);
            padding: 8px 20px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            transition: border-color 0.5s ease;
            font-weight: bold;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--primary-color);
            animation: blink 1.5s infinite;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid var(--primary-dim);
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: background 0.5s ease, border-color 0.5s ease;
            border-radius: 5px;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            transition: background 0.5s ease;
        }

        .card h3 {
            margin: 0 0 15px 0;
            font-size: 1.2rem;
            border-bottom: 1px dashed var(--primary-dim);
            padding-bottom: 10px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .radar-section {
            grid-column: span 2;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        #radarCanvas, #mapCanvas {
            background: radial-gradient(circle, #001100 0%, #000000 100%);
            border-radius: 10px;
            border: 3px solid var(--primary-color);
            width: 100%;
            height: 300px;
            margin: 10px auto;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            transition: border-color 0.5s ease, box-shadow 0.5s ease;
            display: block;
        }
        
        #radarCanvas { border-radius: 50%; max-width: 320px; }

        .target-info-panel {
            background: rgba(0, 20, 0, 0.6);
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        body.threat-mode .target-info-panel {
            display: block;
            border-color: var(--danger-color);
            background: rgba(20, 0, 0, 0.6);
        }

        .target-info-panel h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 1px solid var(--primary-dim);
            padding-bottom: 8px;
        }

        body.threat-mode .target-info-panel h4 { color: var(--danger-color); }

        .target-detail {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
        }

        .target-label { color: #888; }
        .target-value { color: var(--primary-color); font-weight: bold; }
        body.threat-mode .target-value { color: var(--danger-color); }

        .cost-display {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            background: rgba(0, 20, 0, 0.6);
            transition: border-color 0.5s ease;
        }

        .cost-item { text-align: center; }
        .cost-item.enemy { color: var(--danger-color); font-weight: bold; }
        .cost-item.us { color: var(--primary-color); font-weight: bold; }
        .cost-value { font-size: 1.5rem; font-weight: bold; color: var(--primary-color); text-shadow: var(--text-glow); }
        .cost-label { font-size: 0.8rem; color: #888; margin-bottom: 5px; }

        .config-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .config-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--primary-dim);
            border-radius: 5px;
            padding: 15px;
            transition: border-color 0.3s ease;
        }

        .config-item:hover { border-color: var(--primary-color); }
        .config-label { font-size: 0.85rem; color: #888; margin-bottom: 8px; display: block; }
        .config-label-en { font-size: 0.75rem; color: #666; font-style: italic; }

        .cyber-select {
            width: 100%;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 12px;
            font-family: inherit;
            font-size: 0.95rem;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cyber-select:hover {
            background: rgba(0, 255, 65, 0.1);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        .cyber-select option { background: #000; color: var(--primary-color); }

        .encryption-panel, .cyber-attack-panel, .defense-panel, .audio-panel {
            background: rgba(0, 40, 40, 0.1);
            border: 2px solid var(--primary-dim);
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }

        .encryption-panel { border-color: var(--encrypt-color); }
        .encryption-panel h3 { color: var(--encrypt-color); border-bottom-color: var(--encrypt-color); }
        
        .cyber-attack-panel { border-color: var(--danger-color); }
        .cyber-attack-panel h3 { color: var(--danger-color); border-bottom-color: var(--danger-color); }

        .defense-panel { border-color: var(--primary-color); }
        .defense-panel h3 { color: var(--primary-color); border-bottom-color: var(--primary-color); }

        .audio-panel { border-color: var(--cyber-purple); }
        .audio-panel h3 { color: var(--cyber-purple); border-bottom-color: var(--cyber-purple); }

        .protocol-grid, .attack-grid, .defense-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }

        .protocol-item, .attack-item, .defense-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-dim);
            padding: 12px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.85rem;
        }

        .protocol-item:hover, .protocol-item.active {
            background: rgba(0, 255, 255, 0.15);
            border-color: var(--encrypt-color);
            box-shadow: 0 0 15px var(--encrypt-color);
        }

        .attack-item:hover, .attack-item.active {
            background: rgba(255, 0, 0, 0.15);
            border-color: var(--danger-color);
            box-shadow: 0 0 15px var(--danger-color);
        }

        .defense-item:hover, .defense-item.active {
            background: rgba(0, 255, 65, 0.15);
            border-color: var(--primary-color);
            box-shadow: 0 0 15px var(--primary-color);
        }

        .audio-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .audio-btn {
            background: rgba(128, 0, 255, 0.1);
            border: 2px solid var(--cyber-purple);
            color: var(--cyber-purple);
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .audio-btn:hover {
            background: rgba(128, 0, 255, 0.3);
            box-shadow: 0 0 20px var(--cyber-purple);
            transform: translateY(-2px);
        }

        .audio-btn.recording {
            background: rgba(255, 0, 0, 0.4);
            border-color: var(--danger-color);
            color: #fff;
            animation: pulse-record 1s infinite;
        }

        @keyframes pulse-record { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-radius: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover:not(:disabled) {
            background: var(--primary-color);
            color: #000;
            box-shadow: 0 0 20px var(--primary-color);
            transform: translateY(-2px);
        }

        .btn:disabled { opacity: 0.4; cursor: not-allowed; }

        .btn-launch {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.2) 0%, rgba(0, 255, 65, 0.1) 100%);
            border-width: 3px;
            font-size: 1.2rem;
            padding: 18px;
            margin-top: 20px;
            animation: pulse-launch 2s infinite;
        }

        .btn-launch:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.4) 0%, rgba(0, 255, 65, 0.2) 100%);
            box-shadow: 0 0 30px var(--primary-color);
        }

        .btn-abort {
            background: linear-gradient(135deg, var(--abort-color) 0%, #a00000 100%);
            border: 3px solid var(--danger-color);
            color: #fff;
            font-size: 1.1rem;
            padding: 16px;
            margin-top: 15px;
            animation: pulse-abort 2s infinite;
        }

        .btn-abort:hover:not(:disabled) {
            background: linear-gradient(135deg, var(--abort-hover) 0%, var(--abort-color) 100%);
            box-shadow: 0 0 25px var(--danger-color);
            color: #fff;
        }

        .deepfake-synthesizer {
            background: rgba(40, 0, 0, 0.6);
            border: 3px solid var(--danger-color);
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.3);
        }

        .deepfake-synthesizer h3 {
            color: var(--danger-color);
            border-bottom-color: var(--danger-color);
            justify-content: center;
            font-size: 1.3rem;
        }

        .system-ready {
            background: rgba(0, 255, 65, 0.15);
            border: 2px solid var(--primary-color);
            padding: 15px;
            text-align: center;
            margin-top: 15px;
            border-radius: 5px;
            font-weight: bold;
            letter-spacing: 3px;
            font-size: 1.1rem;
            animation: glow 2s ease-in-out infinite;
        }

        body.threat-mode .system-ready {
            background: rgba(255, 0, 0, 0.15);
            border-color: var(--danger-color);
            color: var(--danger-color);
        }

        .logs-card { grid-column: span 2; }

        .console-output {
            height: 280px;
            overflow-y: auto;
            font-size: 0.85rem;
            color: var(--primary-color);
            border: 1px solid var(--primary-dim);
            padding: 15px;
            text-align: left;
            direction: ltr;
            font-family: 'Share Tech Mono', monospace;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 5px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .log-entry { 
            margin-bottom: 6px; 
            padding: 4px 8px;
            border-right: 2px solid transparent;
            animation: slideIn 0.3s ease;
            font-size: 0.8rem;
        }
        
        .log-warning { color: var(--warning-color); border-right-color: var(--warning-color); background: rgba(255, 165, 0, 0.08); }
        .log-success { color: var(--primary-color); font-weight: bold; border-right-color: var(--primary-color); background: rgba(0, 255, 65, 0.08); }
        .log-danger { color: var(--danger-color); font-weight: bold; border-right-color: var(--danger-color); background: rgba(255, 0, 0, 0.08); }
        .log-info { color: #88ccff; border-right-color: #88ccff; background: rgba(136, 204, 255, 0.05); }
        .log-abort { color: #ff6666; font-weight: bold; font-style: italic; border-right-color: #ff6666; background: rgba(255, 102, 102, 0.08); }
        .log-encrypt { color: var(--encrypt-color); border-right-color: var(--encrypt-color); background: rgba(0, 255, 255, 0.08); }
        .log-cyber { color: var(--cyber-purple); border-right-color: var(--cyber-purple); background: rgba(128, 0, 255, 0.08); }
        .log-system { color: #00ff88; border-right-color: #00ff88; background: rgba(0, 255, 136, 0.08); font-weight: bold; }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--primary-dim);
            padding: 12px;
            text-align: center;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 65, 0.2);
        }

        .stat-label { font-size: 0.75rem; color: #888; margin-bottom: 5px; }
        .stat-value { font-size: 1.2rem; font-weight: bold; color: var(--primary-color); }

        footer {
            margin-top: 20px;
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            border-top: 1px solid #333;
            padding-top: 15px;
        }

        @keyframes blink { 0% { opacity: 1; box-shadow: 0 0 10px var(--primary-color); } 50% { opacity: 0.4; box-shadow: 0 0 2px var(--primary-color); } 100% { opacity: 1; box-shadow: 0 0 10px var(--primary-color); } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(0, 255, 65, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0); } }
        @keyframes pulse-launch { 0% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0.5); } 70% { box-shadow: 0 0 0 20px rgba(0, 255, 65, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0); } }
        @keyframes pulse-abort { 0% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0.6); } 70% { box-shadow: 0 0 0 20px rgba(139, 0, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0); } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 5px var(--primary-color); } 50% { box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--primary-dim); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-color); }

        @media (max-width: 1024px) {
            .main-grid { grid-template-columns: 1fr; }
            .radar-section { grid-template-columns: 1fr; }
            .stats-bar { grid-template-columns: repeat(2, 1fr); }
            .protocol-grid, .attack-grid, .defense-grid, .audio-controls { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            .logo-area h1 { font-size: 1.2rem; }
            .stats-bar { grid-template-columns: 1fr; }
        }
    </style>
    <!-- END CSS -->
</head>
<body>
<div class="container">
  <header>
    <div class="logo-area">
      <h1>السراب الرقمي <span style="font-size:0.7em">| Digital Mirage</span></h1>
      <span class="badge">DefenseThon 2026</span>
    </div>
    <div class="system-status">
      <span class="status-dot"></span> <span id="statusText">SYSTEM STANDBY</span>
    </div>
  </header>

  <div class="stats-bar">
    <div class="stat-box">
      <div class="stat-label">الحالة التشغيلية</div>
      <div class="stat-value" id="statStatus">جاهز</div>
    </div>
    <div class="stat-box">
      <div class="stat-label">التردد</div>
      <div class="stat-value">2.4 GHz</div>
    </div>
    <div class="stat-box">
      <div class="stat-label">قوة الإشارة</div>
      <div class="stat-value" id="statSignal">-42 dBm</div>
    </div>
    <div class="stat-box">
      <div class="stat-label">الأهداف النشطة</div>
      <div class="stat-value" id="statTargets">0</div>
    </div>
  </div>

  <div class="main-grid">
    <div class="radar-section">
      <div class="card">
        <h3>الرادار المعرفي <span style="font-size:0.8em">(Cognitive Radar)</span></h3>
        <canvas id="radarCanvas"></canvas>
        <div class="cost-display">
          <div class="cost-item enemy">
            <div class="cost-label">الهدف المعادي</div>
            <div class="cost-value">$2,000,000+</div>
          </div>
          <div class="cost-item us">
            <div class="cost-label">تكلفتنا (Pi + SDR)</div>
            <div class="cost-value">$50.00</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>خريطة تبوك العملياتية <span style="font-size:0.8em">(Tabuk Ops)</span></h3>
        <canvas id="mapCanvas"></canvas>
        <div style="text-align:center;margin-top:10px;font-size:0.85rem;color:#888">
          منطقة تبوك - المملكة العربية السعودية
        </div>
      </div>
    </div>

    <div class="card">
      <h3>مركز القيادة والتحكم</h3>
      
      <div class="target-info-panel" id="targetInfoPanel">
        <h4>معلومات الهدف المحدد</h4>
        <div class="target-detail">
          <span class="target-label">معرف الهدف:</span>
          <span class="target-value" id="targetId">DRONE-X-4F2A</span>
        </div>
        <div class="target-detail">
          <span class="target-label">النوع:</span>
          <span class="target-value">UAV Surveillance</span>
        </div>
        <div class="target-detail">
          <span class="target-label">المسافة:</span>
          <span class="target-value" id="targetDistance">1.2 KM</span>
        </div>
        <div class="target-detail">
          <span class="target-label">الارتفاع:</span>
          <span class="target-value">150 M</span>
        </div>
        <div class="target-detail">
          <span class="target-label">السرعة:</span>
          <span class="target-value">45 M/S</span>
        </div>
        <div class="target-detail">
          <span class="target-label">الحالة:</span>
          <span class="target-value" style="color: #ff0000;">معادي - تم التحديد</span>
        </div>
      </div>

      <div class="config-grid">
        <div class="config-item">
          <label class="config-label">النمط اللغوي <span class="config-label-en">(Voice Clone)</span></label>
          <select id="voicePattern" class="cyber-select">
            <option value="tactical">نداء تكتيكي - تشكيل هجومي</option>
            <option value="defensive">نداء دفاعي - انسحاب تكتيكي</option>
            <option value="recon">استطلاع - جمع معلومات</option>
          </select>
        </div>

        <div class="config-item">
          <label class="config-label">البصمة الرادارية <span class="config-label-en">(RF Signature)</span></label>
          <select id="rfSignature" class="cyber-select">
            <option value="convoy">قافلة مدرعات (بصمة حرارية/رادارية عالية)</option>
            <option value="drone">طائرة بدون طيار (بصمة منخفضة)</option>
            <option value="infantry">وحدة مشاة (بصمة متوسطة)</option>
          </select>
        </div>

        <div class="config-item">
          <label class="config-label">المحاكاة البيئية <span class="config-label-en">(Environment)</span></label>
          <select id="envContext" class="cyber-select">
            <option value="desert">عاصفة رملية (تشويش كهرومغناطيسي)</option>
            <option value="urban">بيئة حضرية (تشتت الإشارة)</option>
            <option value="mountain">terrain جبلي (انعكاسات)</option>
          </select>
        </div>

        <div class="config-item">
          <label class="config-label">اللهجة السعودية المستهدفة</label>
          <select id="dialectSelect" class="cyber-select">
            <option value="qassimi">لهجة قصيمية</option>
            <option value="janoubiya">لهجة جنوبية</option>
            <option value="hijazi">لهجة حجازية</option>
            <option value="najdi">لهجة نجدية</option>
          </select>
        </div>
      </div>

      <div class="encryption-panel">
        <h3>بروتوكولات التشفير <span style="font-size:0.8em">(Encryption)</span></h3>
        <div class="protocol-grid">
          <div class="protocol-item" onclick="toggleProtocol(this, 'AES-256')">AES-256</div>
          <div class="protocol-item" onclick="toggleProtocol(this, 'RSA-4096')">RSA-4096</div>
          <div class="protocol-item" onclick="toggleProtocol(this, 'TLS-1.3')">TLS 1.3</div>
          <div class="protocol-item" onclick="toggleProtocol(this, 'ECC')">ECC Curve</div>
          <div class="protocol-item" onclick="toggleProtocol(this, 'SHA-3')">SHA-3</div>
          <div class="protocol-item" onclick="toggleProtocol(this, 'Quantum')">Quantum-Resistant</div>
        </div>
      </div>

      <div class="cyber-attack-panel">
        <h3>أنظمة الهجوم السيبراني <span style="font-size:0.8em">(Cyber Attack)</span></h3>
        <div class="attack-grid">
          <div class="attack-item" onclick="toggleAttack(this, 'DDoS')">DDoS Attack</div>
          <div class="attack-item" onclick="toggleAttack(this, 'MITM')">Man-in-the-Middle</div>
          <div class="attack-item" onclick="toggleAttack(this, 'SQLi')">SQL Injection</div>
          <div class="attack-item" onclick="toggleAttack(this, 'XSS')">XSS Attack</div>
          <div class="attack-item" onclick="toggleAttack(this, 'ZeroDay')">Zero-Day Exploit</div>
          <div class="attack-item" onclick="toggleAttack(this, 'Ransomware')">Ransomware Sim</div>
        </div>
      </div>

      <div class="defense-panel">
        <h3>أنظمة الأمن السيبراني <span style="font-size:0.8em">(Cyber Defense)</span></h3>
        <div class="defense-grid">
          <div class="defense-item" onclick="toggleDefense(this, 'Firewall')">Next-Gen Firewall</div>
          <div class="defense-item" onclick="toggleDefense(this, 'IDS')">IDS/IPS System</div>
          <div class="defense-item" onclick="toggleDefense(this, 'SIEM')">SIEM Analytics</div>
          <div class="defense-item" onclick="toggleDefense(this, 'Honeypot')">Active Honeypot</div>
          <div class="defense-item" onclick="toggleDefense(this, 'EDR')">EDR Protection</div>
          <div class="defense-item" onclick="toggleDefense(this, 'Sandbox')">Malware Sandbox</div>
        </div>
      </div>

      <div class="audio-panel">
        <h3>التحكم الصوتي <span style="font-size:0.8em">(Audio Controls)</span></h3>
        <div class="audio-controls">
          <button class="audio-btn" id="btnRecord" onclick="toggleRecording()">تسجيل صوتي</button>
          <button class="audio-btn" id="btnPlay" onclick="playAudio()">تشغيل الصوت</button>
          <button class="audio-btn" id="btnVoiceClone" onclick="cloneVoice()">استنساخ الصوت</button>
          <button class="audio-btn" id="btnModulate" onclick="modulateVoice()">تعديل النبرة</button>
        </div>
      </div>

      <button id="lockBtn" onclick="lockTarget()" class="btn btn-lock">تحديد الهدف (Lock Target)</button>
      <button onclick="launchMirage()" class="btn btn-launch" id="btnLaunch" disabled>التصديق وإطلاق السراب</button>
      <button onclick="abortSystem()" class="btn btn-abort" id="btnAbort" disabled>إيقاف البث وإخلاء المنظومة (ABORT)</button>
      
      <div class="deepfake-synthesizer">
        <h3>مولد التزييف العميق <span style="font-size:0.8em">(Deepfake Synthesizer)</span></h3>
        <div class="system-ready" id="systemReady">SYSTEM READY</div>
      </div>
    </div>
  </div>

  <div class="card logs-card">
    <h3>سجل العمليات <span style="font-size:0.8em">(Terminal)</span></h3>
    <div id="consoleLogs" class="console-output"></div>
  </div>
  
  <footer>
    <p><strong>Team: Phantom-011</strong> | phantom-011.netlify.app<br>
    <span style="color:var(--primary-dim)">Classified - DefenseThon Prototype | Top Secret</span></p>
  </footer>
</div>

<!-- ========================================== -->
<!-- START JS (انسخ هذا الجزء لمربع JS في CodePen) -->
<!-- ========================================== -->
<script>
    // Audio Library - روابط أصوات جاهزة
    const audioLibrary = {
      qassimi: 'https://www.soundjay.com/human/sounds/voice-male-01.mp3',
      janoubiya: 'https://www.soundjay.com/human/sounds/voice-male-02.mp3',
      hijazi: 'https://www.soundjay.com/human/sounds/voice-male-03.mp3',
      najdi: 'https://www.soundjay.com/human/sounds/voice-male-04.mp3',
      success: 'https://www.soundjay.com/buttons/sounds/button-16.mp3',
      alert: 'https://www.soundjay.com/alert/sounds/alarm-1.mp3',
      radar: 'https://www.soundjay.com/transport/sounds/radar-sweep-01.mp3'
    };

    let audioEnabled = false;
    
    // تمكين الصوت عند أول تفاعل (لتجاوز سياسة المتصفح)
    document.body.addEventListener('click', () => {
      if (!audioEnabled) {
        const unlock = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA');
        unlock.play().catch(() => {});
        audioEnabled = true;
      }
    }, { once: true });

    function playRealAudio(audioKey) {
      if (!audioEnabled) return;
      const audio = new Audio(audioLibrary[audioKey]);
      audio.volume = 0.6;
      audio.play().catch(error => {});
    }

    const canvas = document.getElementById('radarCanvas');
    const mapCanvas = document.getElementById('mapCanvas');
    const ctx = canvas.getContext('2d');
    const mapCtx = mapCanvas.getContext('2d');
    let angle = 0;
    let isThreatMode = false;
    let mirageActive = false;
    let activeTargets = 0;
    let isRecording = false;

    function getPrimaryColor() { return isThreatMode ? '#ff0000' : '#00ff41'; }
    function getDimColor() { return isThreatMode ? '#440000' : '#003300'; }

    // رسم الرادار
    function drawRadar() {
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 150;
        const primaryColor = getPrimaryColor();
        const dimColor = getDimColor();

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        ctx.strokeStyle = dimColor;
        ctx.lineWidth = 1;
        for(let i=1; i<=4; i++) {
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * (i/4), 0, 2 * Math.PI);
            ctx.stroke();
        }

        ctx.beginPath();
        ctx.moveTo(centerX, centerY - radius);
        ctx.lineTo(centerX, centerY + radius);
        ctx.moveTo(centerX - radius, centerY);
        ctx.lineTo(centerX + radius, centerY);
        ctx.stroke();

        ctx.strokeStyle = primaryColor;
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(centerX + radius * Math.cos(angle), centerY + radius * Math.sin(angle));
        ctx.stroke();
        
        const gradient = ctx.createConicGradient(angle - Math.PI/2, centerX, centerY);
        gradient.addColorStop(0, 'transparent');
        gradient.addColorStop(0.8, isThreatMode ? 'rgba(255, 0, 0, 0.2)' : 'rgba(0, 255, 65, 0.1)');
        gradient.addColorStop(1, 'transparent');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
        ctx.fill();

        ctx.fillStyle = '#ff3333';
        ctx.shadowBlur = 10;
        ctx.shadowColor = '#ff0000';
        ctx.beginPath();
        ctx.arc(centerX + 80 * Math.sin(angle * 0.3), centerY - 80 * Math.cos(angle * 0.3), 6, 0, 2 * Math.PI);
        ctx.fill();
        ctx.shadowBlur = 0;
        
        if (isThreatMode && mirageActive) {
            ctx.fillStyle = primaryColor;
            ctx.shadowBlur = 15;
            ctx.shadowColor = primaryColor;
            
            for(let i=0; i<3; i++) {
                const offset = (i * Math.PI * 2) / 3;
                ctx.beginPath();
                ctx.arc(
                    centerX + 100 * Math.cos(angle * 0.5 + offset),
                    centerY + 100 * Math.sin(angle * 0.5 + offset),
                    5, 0, 2 * Math.PI
                );
                ctx.fill();
            }
            ctx.shadowBlur = 0;
        }

        angle += 0.025;
        requestAnimationFrame(drawRadar);
    }

    // رسم خريطة تبوك
    function drawTabukMap() {
        const width = mapCanvas.width;
        const height = mapCanvas.height;
        const primaryColor = getPrimaryColor();
        
        mapCtx.clearRect(0, 0, width, height);
        
        // خلفية الخريطة
        mapCtx.fillStyle = '#001100';
        mapCtx.fillRect(0, 0, width, height);
        
        // رسم حدود السعودية تقريباً
        mapCtx.strokeStyle = '#004400';
        mapCtx.lineWidth = 2;
        mapCtx.beginPath();
        mapCtx.moveTo(50, 250);
        mapCtx.lineTo(100, 200);
        mapCtx.lineTo(200, 150);
        mapCtx.lineTo(350, 120);
        mapCtx.lineTo(380, 180);
        mapCtx.lineTo(350, 250);
        mapCtx.lineTo(250, 280);
        mapCtx.lineTo(150, 270);
        mapCtx.closePath();
        mapCtx.stroke();
        
        // تحديد منطقة تبوك (شمال غرب)
        mapCtx.fillStyle = isThreatMode ? 'rgba(255, 0, 0, 0.3)' : 'rgba(0, 255, 65, 0.2)';
        mapCtx.strokeStyle = primaryColor;
        mapCtx.lineWidth = 3;
        mapCtx.beginPath();
        mapCtx.moveTo(60, 240);
        mapCtx.lineTo(100, 200);
        mapCtx.lineTo(160, 160);
        mapCtx.lineTo(180, 190);
        mapCtx.lineTo(150, 240);
        mapCtx.lineTo(100, 250);
        mapCtx.closePath();
        mapCtx.fill();
        mapCtx.stroke();
        
        // كتابة "تبوك"
        mapCtx.fillStyle = primaryColor;
        mapCtx.font = 'bold 16px Cairo';
        mapCtx.textAlign = 'center';
        mapCtx.fillText('تبوك', 120, 210);
        
        // موقع الهدف
        if (isThreatMode) {
            mapCtx.fillStyle = '#ff0000';
            mapCtx.shadowBlur = 15;
            mapCtx.shadowColor = '#ff0000';
            mapCtx.beginPath();
            mapCtx.arc(140, 190, 8, 0, 2 * Math.PI);
            mapCtx.fill();
            mapCtx.shadowBlur = 0;
            
            // هدف وهمي
            if (mirageActive) {
                mapCtx.fillStyle = primaryColor;
                mapCtx.beginPath();
                mapCtx.arc(200, 220, 6, 0, 2 * Math.PI);
                mapCtx.fill();
            }
        }
        
        // البحر الأحمر
        mapCtx.fillStyle = '#003344';
        mapCtx.beginPath();
        mapCtx.moveTo(0, 200);
        mapCtx.lineTo(50, 250);
        mapCtx.lineTo(50, 300);
        mapCtx.lineTo(0, 300);
        mapCtx.closePath();
        mapCtx.fill();
        
        requestAnimationFrame(drawTabukMap);
    }

    function resizeCanvas() {
        const size = Math.min(320, canvas.parentElement.clientWidth - 40);
        canvas.width = size;
        canvas.height = size;
        
        const mapWidth = Math.min(400, mapCanvas.parentElement.clientWidth - 40);
        mapCanvas.width = mapWidth;
        mapCanvas.height = 300;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    drawRadar();
    drawTabukMap();

    const consoleDiv = document.getElementById('consoleLogs');
    function addLog(message, type = 'info') {
        const now = new Date();
        const time = now.toLocaleTimeString('en-US', {hour12: false});
        const div = document.createElement('div');
        div.className = 'log-entry';
        
        let colorClass = 'log-info';
        if(type === 'warning') colorClass = 'log-warning';
        if(type === 'success') colorClass = 'log-success';
        if(type === 'danger') colorClass = 'log-danger';
        if(type === 'abort') colorClass = 'log-abort';
        if(type === 'encrypt') colorClass = 'log-encrypt';
        if(type === 'cyber') colorClass = 'log-cyber';
        if(type === 'system') colorClass = 'log-system';
        
        div.innerHTML = `<span style="color:#666">[${time}]</span> <span class="${colorClass}">${message}</span>`;
        consoleDiv.prepend(div);
        consoleDiv.scrollTop = 0;
    }

    function getDialectName(value) {
        const dialects = { 'qassimi': 'قصيمية', 'janoubiya': 'جنوبية', 'hijazi': 'حجازية', 'najdi': 'نجدية' };
        return dialects[value] || value;
    }

    function getVoicePatternName(value) {
        const patterns = { 'tactical': 'نداء تكتيكي - تشكيل هجومي', 'defensive': 'نداء دفاعي - انسحاب تكتيكي', 'recon': 'استطلاع - جمع معلومات' };
        return patterns[value] || value;
    }

    function getRFSignatureName(value) {
        const signatures = { 'convoy': 'قافلة مدرعات', 'drone': 'طائرة بدون طيار', 'infantry': 'وحدة مشاة' };
        return signatures[value] || value;
    }

    function getEnvContextName(value) {
        const contexts = { 'desert': 'عاصفة رملية', 'urban': 'بيئة حضرية', 'mountain': 'terrain جبلي' };
        return contexts[value] || value;
    }

    function updateStats(status, signal, targets) {
        if(status) document.getElementById('statStatus').innerText = status;
        if(signal) document.getElementById('statSignal').innerText = signal;
        if(targets !== undefined) {
            document.getElementById('statTargets').innerText = targets;
            activeTargets = targets;
        }
    }

    function toggleProtocol(element, protocol) {
        element.classList.toggle('active');
        const isActive = element.classList.contains('active');
        addLog(`[${isActive ? 'ENABLED' : 'DISABLED'}] Encryption Protocol: ${protocol}`, 'encrypt');
    }

    function toggleAttack(element, attack) {
        element.classList.toggle('active');
        const isActive = element.classList.contains('active');
        addLog(`[${isActive ? 'ACTIVATED' : 'DEACTIVATED'}] Cyber Attack Module: ${attack}`, 'cyber');
    }

    function toggleDefense(element, defense) {
        element.classList.toggle('active');
        const isActive = element.classList.contains('active');
        addLog(`[${isActive ? 'ACTIVATED' : 'DEACTIVATED'}] Defense System: ${defense}`, 'success');
    }

    function toggleRecording() {
        const btn = document.getElementById('btnRecord');
        isRecording = !isRecording;
        
        if(isRecording) {
            btn.classList.add('recording');
            btn.innerText = 'جاري التسجيل...';
            playRealAudio('alert');
            addLog('[AUDIO] Recording started - Channel: SDR-A1', 'info');
        } else {
            btn.classList.remove('recording');
            btn.innerText = 'تسجيل صوتي';
            addLog('[AUDIO] Recording stopped - File saved: audio_001.wav', 'success');
        }
    }

    function playAudio() {
        playRealAudio('success');
        addLog('[AUDIO] Playing audio sample...', 'info');
        setTimeout(() => addLog('[AUDIO] Playback completed successfully', 'success'), 2000);
    }

    function cloneVoice() {
        const dialect = document.getElementById('dialectSelect').value;
        addLog(`[VOICE] Cloning voice with ${getDialectName(dialect)} dialect...`, 'cyber');
        
        setTimeout(() => {
            playRealAudio(dialect);
        }, 1000);
        
        setTimeout(() => addLog('[VOICE] Voice clone generated successfully', 'success'), 2500);
    }

    function modulateVoice() {
        addLog('[VOICE] Modulating voice frequency...', 'info');
        setTimeout(() => addLog('[VOICE] Voice modulation applied - Freq: 2.4kHz', 'success'), 1500);
    }

    setTimeout(() => {
        addLog('========================================', 'system');
        addLog('SYSTEM INITIALIZATION SEQUENCE STARTED', 'system');
        addLog('========================================', 'system');
        setTimeout(() => addLog('[SYSTEM] Loading Generative AI Models (Saudi Dialects)...', 'info'), 400);
        setTimeout(() => addLog('[SDR] Module Connected - Freq: 2.4GHz / 5.8GHz', 'success'), 800);
        setTimeout(() => addLog('[HONEYPOT] Service Active - Port: 8080', 'success'), 1200);
        setTimeout(() => addLog('[VOICE] Clone Engine: Ready', 'success'), 1600);
        setTimeout(() => addLog('[RF] Signature Generator: Online', 'success'), 2000);
        setTimeout(() => addLog('[ENCRYPTION] Protocols Loaded: AES-256, RSA-4096, TLS-1.3', 'encrypt'), 2400);
        setTimeout(() => addLog('[CYBER] Attack Systems: Standby Mode', 'cyber'), 2800);
        setTimeout(() => addLog('[DEFENSE] Systems: Active Monitoring', 'success'), 3200);
        setTimeout(() => addLog('[RADAR] Cognitive Radar: Scanning...', 'info'), 3500);
        setTimeout(() => addLog('========================================', 'system'), 3800);
        setTimeout(() => addLog('SYSTEM READY - AWAITING TARGET LOCK', 'success'), 4000);
    }, 500);

    function lockTarget() {
        if (isThreatMode) return;
        
        isThreatMode = true;
        document.body.classList.add('threat-mode');
        document.getElementById('statusText').innerText = "TARGET LOCKED";
        document.getElementById('lockBtn').disabled = true;
        document.getElementById('lockBtn').innerText = "تم تحديد الهدف";
        document.getElementById('systemReady').innerText = "THREAT MODE ACTIVE";
        document.getElementById('btnLaunch').disabled = false;
        document.getElementById('btnAbort').disabled = false;
        
        updateStats('مقفول', '-38 dBm', 1);
        playRealAudio('alert');
        
        addLog('========================================', 'danger');
        addLog('TARGET ACQUISITION SEQUENCE INITIATED', 'danger');
        addLog('========================================', 'danger');
        setTimeout(() => addLog('[RADAR] Scanning frequencies...', 'warning'), 300);
        setTimeout(() => addLog('[RADAR] Signal detected - Class: UAV', 'warning'), 800);
        setTimeout(() => addLog('[TARGET] ACQUIRED: DRONE-X-4F2A', 'danger'), 1200);
        setTimeout(() => addLog('[TARGET] Type: Surveillance UAV', 'danger'), 1500);
        setTimeout(() => addLog('[TARGET] Distance: 1.2 KM | Altitude: 150 M', 'danger'), 1800);
        setTimeout(() => addLog('[TARGET] Speed: 45 M/S | Heading: 245 deg', 'danger'), 2100);
        setTimeout(() => addLog('[STATUS] THREAT MODE: ACTIVATED', 'danger'), 2400);
        setTimeout(() => addLog('[SYSTEM] Weapons Systems: ONLINE', 'success'), 2700);
        setTimeout(() => addLog('[CONFIG] Loading deployment parameters...', 'info'), 3000);
        setTimeout(() => addLog('========================================', 'system'), 3300);
    }

    function launchMirage() {
        if (!isThreatMode) {
            addLog('[ERROR] Target not locked - Aborting', 'danger');
            return;
        }
        
        mirageActive = true;
        const dialect = getDialectName(document.getElementById('dialectSelect').value);
        const voicePattern = getVoicePatternName(document.getElementById('voicePattern').value);
        const rfSignature = getRFSignatureName(document.getElementById('rfSignature').value);
        const envContext = getEnvContextName(document.getElementById('envContext').value);
        
        addLog('========================================', 'warning');
        addLog('MIRAGE DEPLOYMENT SEQUENCE INITIATED', 'warning');
        addLog('========================================', 'warning');
        setTimeout(() => addLog(`[VOICE] Pattern: ${voicePattern}`, 'info'), 400);
        setTimeout(() => addLog(`[RF] Signature: ${rfSignature}`, 'info'), 800);
        setTimeout(() => addLog(`[ENV] Context: ${envContext}`, 'info'), 1200);
        setTimeout(() => addLog(`[DEEPFAKE] Generating audio: ${dialect} dialect`, 'info'), 1600);
        setTimeout(() => addLog('[SDR] Broadcasting false signature...', 'warning'), 2200);
        setTimeout(() => addLog('[MIRAGE] Deployed successfully', 'success'), 2800);
        setTimeout(() => addLog('[RADAR] Enemy tracking decoy targets', 'success'), 3400);
        setTimeout(() => addLog('[MISSION] Status: ACTIVE', 'success'), 3800);
        setTimeout(() => addLog('========================================', 'system'), 4200);
        
        setTimeout(() => {
            executeArabicTerminalSequence();
        }, 1000);
        
        updateStats('نشط', '-35 dBm', 4);
        document.getElementById('systemReady').innerText = "MIRAGE ACTIVE";
    }

    function abortSystem() {
        addLog('========================================', 'abort');
        addLog('EMERGENCY ABORT SEQUENCE INITIATED', 'abort');
        addLog('========================================', 'abort');
        setTimeout(() => addLog('[SYSTEM] Stopping all transmissions...', 'abort'), 400);
        setTimeout(() => addLog('[MEMORY] Clearing system memory...', 'abort'), 900);
        setTimeout(() => addLog('[SDR] Disconnecting from SDR module...', 'abort'), 1400);
        setTimeout(() => addLog('[HONEYPOT] Evacuating protocols...', 'abort'), 1900);
        setTimeout(() => addLog('[DATA] Wiping temporary data...', 'abort'), 2400);
        setTimeout(() => {
            isThreatMode = false;
            mirageActive = false;
            document.body.classList.remove('threat-mode');
            document.getElementById('statusText').innerText = "SYSTEM STANDBY";
            document.getElementById('systemReady').innerText = "SYSTEM READY";
            document.getElementById('lockBtn').disabled = false;
            document.getElementById('lockBtn').innerText = "تحديد الهدف (Lock Target)";
            document.getElementById('btnLaunch').disabled = true;
            document.getElementById('btnAbort').disabled = true;
            
            updateStats('جاهز', '-42 dBm', 0);
            addLog('[SYSTEM] Evacuated - Returned to standby mode', 'success');
            setTimeout(() => addLog('[STATUS] Ready for new operation', 'info'), 500);
            setTimeout(() => addLog('========================================', 'system'), 800);
        }, 2900);
    }

    function executeArabicTerminalSequence() {
        const consoleDiv = document.getElementById('consoleLogs');
        consoleDiv.innerHTML = '';
        
        const logs = [
            { time: '6:55:58 ص', text: '[*] تم التصديق على أمر التشغيل. تهيئة المنظومة التوليدية ...', type: 'info' },
            { time: '6:55:58 ص', text: '[+] اعتماد المعايير: النطاق [Convoy] | السياق البيئي [تشويش عاصفة]', type: 'success' },
            { time: '6:55:58 ص', text: '[*] بناء الحزم التشفيرية ومحاكاة بصمات الاتصال ...', type: 'info' },
            { time: '6:55:59 ص', text: '[*] تطبيق خوارزمية انعكاس الإشارة لنطاق Convoy', type: 'info' },
            { time: '6:56:00 ص', text: '------------------------------------------------------------', type: 'info' },
            { time: '6:56:00 ص', text: '>>> بدء البث التكتيكي في الفضاء الكهرومغناطيسي <<<', type: 'system' },
            { time: '6:56:00 ص', text: '[+] نقطة البث (Node 1) متصلة وتعمل بكفاءة.', type: 'success' },
            { time: '6:56:01 ص', text: '[+] نقطة البث (Node 2) متصلة وتعمل بكفاءة.', type: 'success' },
            { time: '6:56:01 ص', text: '[+] نقطة البث (Node 3) متصلة وتعمل بكفاءة.', type: 'success' },
            { time: '6:56:02 ص', text: 'السراب الرقمي نشط بالكامل. بانتظار استجابة الأهداف المعادية ...', type: 'system' },
            { time: '6:56:04 ص', text: '... إجراء مسح طيفي للترددات المحيطة ...', type: 'info' },
            { time: '6:56:06 ص', text: '[!!!] إنذار: تم رصد نشاط استطلاعي معادي في قطاع البث!', type: 'danger' },
            { time: '6:56:07 ص', text: '[*] تفعيل بروتوكول الفخ السيبراني (Active Honeypot) [><]', type: 'warning' },
            { time: '6:56:07 ص', text: '[*] فتح ثغرة وهمية في الجدار الناري لاستدراج الهدف ...', type: 'info' },
            { time: '6:56:08 ص', text: '[!] الهدف يحاول اعتراض الاتصال! جاري إنشاء مسار عكسي (Reverse TCP) ...', type: 'danger' },
            { time: '6:56:09 ص', text: '[+] تم الاتصال. حقن شفرة استطلاع (Zero-Click Recon) في نظام الهدف ...', type: 'success' },
            { time: '6:56:10 ص', text: '[✓] تم الاختراق العكسي بنجاح! جاري استخراج البيانات الحساسة ...', type: 'success' },
            { time: '6:56:11 ص', text: '[+] مُعرّف الهدف (IP): 179.235.185.106', type: 'info' },
            { time: '6:56:11 ص', text: '[+] الإحداثيات: 34.011 , 48.991', type: 'info' },
            { time: '6:56:12 ص', text: '[+] تصنيف التهديد: طائرة استطلاع مسيرة (UAV)', type: 'warning' },
            { time: '6:56:12 ص', text: '[**] الهدف مقيد داخل الشبكة. بانتظار أمر التحييد النهائي.', type: 'danger' }
        ];

        let delay = 0;
        
        logs.forEach((log, index) => {
            setTimeout(() => {
                addLogWithTime(log.time, log.text, log.type);
                
                if (index === logs.length - 1) {
                    setTimeout(() => {
                        showTargetReport();
                    }, 1000);
                }
            }, delay);
            delay += 600;
        });
    }

    function addLogWithTime(time, message, type = 'info') {
        const consoleDiv = document.getElementById('consoleLogs');
        const div = document.createElement('div');
        div.className = 'log-entry';
        
        let colorClass = 'log-info';
        if(type === 'warning') colorClass = 'log-warning';
        if(type === 'success') colorClass = 'log-success';
        if(type === 'danger') colorClass = 'log-danger';
        if(type === 'system') colorClass = 'log-system';
        
        div.innerHTML = `<span style="color:#888">[${time}]</span> <span class="${colorClass}">${message}</span>`;
        consoleDiv.appendChild(div);
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
    }

    function showTargetReport() {
        const reportHTML = `
            <div style="
                margin-top: 20px;
                border: 3px solid #ff0000;
                border-radius: 10px;
                padding: 25px;
                background: linear-gradient(135deg, rgba(139, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.8) 100%);
                text-align: center;
                animation: slideIn 0.5s ease;
            ">
                <div style="
                    color: #ff0000;
                    font-size: 0.9rem;
                    letter-spacing: 3px;
                    margin-bottom: 15px;
                    border-bottom: 2px solid #ff0000;
                    padding-bottom: 10px;
                ">/// TOP SECRET | ACTION REPORT | TOP SECRET ///</div>
                
                <div style="
                    width: 80px;
                    height: 80px;
                    border: 3px solid #ff0000;
                    border-radius: 50%;
                    margin: 20px auto;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 40px;
                    color: #ff0000;
                    animation: pulse 1s infinite;
                ">✓</div>
                
                <h2 style="
                    color: #ffffff;
                    font-size: 2rem;
                    margin: 20px 0;
                    text-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
                ">تم تحييد التهديد</h2>
                
                <div style="
                    color: #ff6666;
                    font-size: 1rem;
                    letter-spacing: 2px;
                    margin-bottom: 30px;
                ">POST-STRIKE ASSESSMENT: SUCCESS</div>
                
                <div style="
                    text-align: right;
                    margin: 25px 0;
                    font-size: 1rem;
                ">
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        padding: 10px 0;
                        border-bottom: 1px solid rgba(255,255,255,0.1);
                    ">
                        <span style="color: #888;">(Target Status) حالة الهدف</span>
                        <span style="
                            color: #ff0000;
                            background: rgba(255, 0, 0, 0.2);
                            padding: 3px 12px;
                            border-radius: 3px;
                            font-weight: bold;
                        ">NEUTRALIZED</span>
                    </div>
                    
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        padding: 10px 0;
                        border-bottom: 1px solid rgba(255,255,255,0.1);
                    ">
                        <span style="color: #888;">(Target ID) مُعرّف الهدف</span>
                        <span style="color: #00ffff; font-family: 'Share Tech Mono', monospace;">131.50.71.218</span>
                    </div>
                    
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        padding: 10px 0;
                        border-bottom: 1px solid rgba(255,255,255,0.1);
                    ">
                        <span style="color: #888;">(Method) طريقة التحييد</span>
                        <span style="color: #0080ff; font-family: 'Share Tech Mono', monospace;">Cyber-Kinetic Override</span>
                    </div>
                    
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        padding: 10px 0;
                    ">
                        <span style="color: #888;">(T-Time) وقت التنفيذ</span>
                        <span style="color: #00ff41; font-family: 'Share Tech Mono', monospace;">6:38:03 ص</span>
                    </div>
                </div>
                
                <button onclick="closeReport()" style="
                    width: 100%;
                    padding: 15px;
                    margin-top: 20px;
                    background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
                    border: 2px solid #ff0000;
                    color: #ffffff;
                    font-family: 'Cairo', sans-serif;
                    font-size: 1.1rem;
                    font-weight: bold;
                    border-radius: 5px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                " onmouseover="this.style.boxShadow='0 0 20px rgba(255,0,0,0.6)'" onmouseout="this.style.boxShadow='none'">
                    إغلاق التقرير والعودة للوضع الآمن
                </button>
            </div>
        `;
        
        const consoleDiv = document.getElementById('consoleLogs');
        const reportDiv = document.createElement('div');
        reportDiv.innerHTML = reportHTML;
        consoleDiv.appendChild(reportDiv);
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
    }

    function closeReport() {
        const consoleDiv = document.getElementById('consoleLogs');
        consoleDiv.innerHTML = '';
        addLog('SYSTEM RESET - Ready for new operation', 'success');
        
        isThreatMode = false;
        mirageActive = false;
        document.body.classList.remove('threat-mode');
        document.getElementById('statusText').innerText = "SYSTEM STANDBY";
        document.getElementById('systemReady').innerText = "SYSTEM READY";
        document.getElementById('lockBtn').disabled = false;
        document.getElementById('lockBtn').innerText = "تحديد الهدف (Lock Target)";
        document.getElementById('btnLaunch').disabled = true;
        document.getElementById('btnAbort').disabled = true;
        updateStats('جاهز', '-42 dBm', 0);
    }

    // Keyboard Shortcuts
    document.addEventListener('keydown', (e) => {
      if(e.key === 'l' && !isThreatMode) lockTarget();
      if(e.key === 'm' && isThreatMode) launchMirage();
      if(e.key === 'a') abortSystem();
      if(e.key === 'f') {
        if(!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
      }
    });
</script>
<!-- END JS -->
</body>
</html>
